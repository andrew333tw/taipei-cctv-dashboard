<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
  <meta charset="utf-8" />
  <title>Taipei CCTV Dashboard</title>
  <style>
    .grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; }
    .cctv-item { text-align: center; }
    iframe { width: 100%; height: 240px; border: none; }
    .pagination { margin: 14px 0; text-align: center; }
    .pagination a { margin: 0 4px; text-decoration: none; color: #007bff; }
    .pagination .active { font-weight: bold; text-decoration: underline; }

    #cctvTable td { padding:4px 12px; white-space:nowrap; border:1px solid #ddd; }

    /* æ¨™é¡Œç½®ä¸­ï¼›å³å´æ”¾æœå°‹ */
    .header-row{ display:flex; justify-content: space-between; align-items:flex-end; }
    .header-title{ flex:1; text-align:center; font-size:32px; font-weight:bold; }

    /* --- Drawer (åº•éƒ¨åˆ—è¡¨) --- */
    #listDrawer {
      position:fixed;
      left:0;
      right:0;
      bottom:-300px;
      height:300px;
      background:#fff;
      border-top:1px solid #ccc;
      overflow:auto;
      transition: bottom 0.3s;
      padding:12px;
      z-index:11;
    }
    #drawerClose{
      position:absolute;
      right:8px;
      top:8px;
      cursor:pointer;
      font-weight:bold;
    }
    /* åŠé€æ˜èƒŒæ™¯ */
    #overlay {
      position:fixed;
      left:0; top:0; right:0; bottom:0;
      background:rgba(0,0,0,0.4);
      display:none;
      z-index:10;
    }
  </style>
</head>
<body>

<!-- header -->
<div class="header-row">
  <div class="header-title">ğŸ¥ å°åŒ—å¸‚CCTVç›£æ§æ¿</div>
  <div>
    <input type="text" id="search" placeholder="æœå°‹ç·¨è™Ÿæˆ–åç¨±"/>
    <button onclick="window.searchCCTV()">æœå°‹</button>
  </div>
</div>

<hr/>

<strong>ğŸŸ¡ è‡ªè¨‚ç›£çœ‹æ¸…å–®</strong><br/>
<label for="inputCode">è¼¸å…¥ CCTV ç·¨è™Ÿï¼š</label>
<input type="text" id="inputCode"/>
<button id="addToListBtn">ï¼‹åŠ å…¥</button>
<div id="selectedList" style="margin:5px 0;"></div>
<button id="startCustomBtn" disabled>é–‹å§‹ç›£çœ‹</button>

<hr/>

<button id="toggleListBtn">ğŸ“‹ å°åŒ—å¸‚CCTVç·¨è™Ÿåˆ—è¡¨</button>

<!-- åŠé€æ˜é®ç½© -->
<div id="overlay"></div>

<!-- åº•éƒ¨ Drawer -->
<div id="listDrawer">
  <span id="drawerClose">âŒ</span>
  <div id="drawerContent"></div>
</div>

<div id="grid" class="grid"></div>
<div id="pagination" class="pagination"></div>

<script src="app.js"></script>
<script>
/* è¼‰å…¥ JSON */
init();

/* Drawer & Overlay */
let listOpen  = false;
const drawer  = document.getElementById('listDrawer');
const overlay = document.getElementById('overlay');
const drawerContent = document.getElementById('drawerContent');
const closeBtn = document.getElementById('drawerClose');

// å±•é–‹ or æ”¶åˆ
document.getElementById('toggleListBtn').onclick = toggleDrawer;
closeBtn.onclick  = toggleDrawer;
overlay.onclick   = toggleDrawer;

function toggleDrawer(){
  if(!listOpen && drawerContent.innerHTML === ''){
    // åˆæ¬¡å±•é–‹ â†’ ç”¢ç”Ÿå…§å®¹
    drawerContent.innerHTML = cctvData.map(d => `<div>${d.id} ${d.name}</div>`).join('');
  }
  listOpen = !listOpen;
  drawer.style.bottom   = listOpen ? '0px' : '-300px';
  overlay.style.display = listOpen ? 'block' : 'none';
}
</script>
</body>
</html>
