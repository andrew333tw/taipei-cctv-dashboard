<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
  <meta charset="utf-8" />
  <title>Taipei CCTV Dashboard</title>
  <style>
    .grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; }
    .cctv-item { text-align: center; }
    iframe { width: 100%; height: 240px; border: none; }
    .pagination { margin: 14px 0; text-align: center; }
    .pagination a { margin: 0 4px; text-decoration: none; color: #007bff; }
    .pagination .active { font-weight: bold; text-decoration: underline; }

    /* ç·¨è™Ÿåˆ—è¡¨ span æ°´å¹³æ’åˆ— */
    #cctvList span {
      display:inline-block;
      margin-right:16px;
      margin-bottom:8px;
    }
  </style>
</head>
<body>

<button id="startBtn">è¼‰å…¥ CCTV</button>
<input type="text" id="search" placeholder="æœå°‹ç·¨è™Ÿæˆ–åç¨±"/>
<button onclick="searchCCTV()">æœå°‹</button>

<div id="grid" class="grid"></div>
<div id="pagination" class="pagination"></div>

<button id="toggleListBtn">ğŸ“‹ å°åŒ—å¸‚CCTVç·¨è™Ÿåˆ—è¡¨</button>
<div id="cctvList" style="display:none; margin-top:12px;"></div>
#cctvTable td {
  padding: 4px 12px;
  white-space: nowrap;
  border: 1px solid #ddd;
}

<script>
// â–¼ é»ã€Œè¼‰å…¥ CCTVã€â†’ è¼‰å…¥ json + render ç•«é¢
document.getElementById('startBtn').onclick = function(){
  init();
  this.style.display = 'none';
};

// â–¼ é»ã€Œç·¨è™Ÿåˆ—è¡¨ã€â†’ å¦‚æœ cctvData ç‚ºç©º â†’ åª fetch json â†’ å†å±•é–‹ã€ç´”æ–‡å­—æ¸…å–®ã€
document.getElementById('toggleListBtn').onclick = function(){
  const div = document.getElementById('cctvList');

  // å°šæœªå–å¾—è³‡æ–™ â†’ åªè®€å– json
  if (cctvData.length === 0) {
    fetch('cctv.json')
      .then(r => r.json())
      .then(data => {
        cctvData = data;
        div.innerHTML = cctvData.map(d => `<span>${d.id} ${d.name}</span>`).join('');
        div.style.display = 'block';
      });
    return;
  }

  // å·²ç¶“æœ‰è³‡æ–™ â†’ æ­£å¸¸æ”¶åˆ/å±•é–‹
  if(div.style.display === 'none'){
    div.innerHTML = cctvData.map(d => `<span>${d.id} ${d.name}</span>`).join('');
    div.style.display = 'block';
  } else {
    div.style.display = 'none';
  }
};
</script>

<script src="app.js"></script>
</body>
</html>

